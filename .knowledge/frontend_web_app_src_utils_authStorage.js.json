{"is_source_file": true, "format": "JavaScript", "description": "This file provides client-side utilities for securely handling user authentication data, including password hashing with Web Crypto API, local storage management for user accounts and sessions, and methods for signup, login, logout, and session retrieval.", "external_files": ["./storage"], "external_methods": ["safeParse", "safeStringify"], "published": ["hashPassword", "generateSalt", "loadUsers", "saveUsers", "signup", "login", "logout", "getSession", "isAuthenticated", "setSession"], "classes": [], "methods": [{"name": "hashPassword(password, saltBase64)", "description": "Hashes a password with a provided salt using SHA-256, returning a base64-encoded string.", "scope": "", "scopeKind": ""}, {"name": "generateSalt(byteLength = 16)", "description": "Generates a cryptographically secure salt of specified byte length, returning it as a base64 string.", "scope": "", "scopeKind": ""}, {"name": "loadUsers()", "description": "Loads and parses the user credentials map from local storage.", "scope": "", "scopeKind": ""}, {"name": "saveUsers(users)", "description": "Saves the user credentials map to local storage.", "scope": "", "scopeKind": ""}, {"name": "signup(email, password)", "description": "Creates a new user, hashes their password, stores their data, and sets an active session.", "scope": "", "scopeKind": ""}, {"name": "login(email, password)", "description": "Verifies user credentials against stored data and sets the session upon success.", "scope": "", "scopeKind": ""}, {"name": "logout()", "description": "Clears the current user session from local storage.", "scope": "", "scopeKind": ""}, {"name": "getSession()", "description": "Retrieves the current session details if available.", "scope": "", "scopeKind": ""}, {"name": "isAuthenticated()", "description": "Checks if there is an active user session.", "scope": "", "scopeKind": ""}, {"name": "setSession(session)", "description": "Stores the provided session object in local storage.", "scope": "", "scopeKind": ""}, {"name": "base64ToBytes(base64)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bytesToBase64(bytes)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["crypto.subtle.digest", "crypto.getRandomValues", "window.localStorage.getItem", "window.localStorage.setItem", "window.localStorage.removeItem", "safeParse", "safeStringify", "atob", "btoa"], "search-terms": ["authStorage", "password hashing", "client-side login", "localStorage user data", "session management"], "state": 2, "file_id": 31, "knowledge_revision": 98, "git_revision": "", "ctags": [{"_type": "tag", "name": "HASH_ALGO", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^const HASH_ALGO = 'SHA-256';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SESSION_KEY", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^const SESSION_KEY = 'wanderplan.auth.session.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TEXT_ENCODER", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^const TEXT_ENCODER = typeof TextEncoder !== 'undefined' ? new TextEncoder() : null;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "USERS_KEY", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^const USERS_KEY = 'wanderplan.auth.users.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "base64ToBytes", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^function base64ToBytes(base64) {$/", "language": "JavaScript", "kind": "function", "signature": "(base64)"}, {"_type": "tag", "name": "bytesToBase64", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^function bytesToBase64(bytes) {$/", "language": "JavaScript", "kind": "function", "signature": "(bytes)"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^  users[e] = { email: e, salt, hash, createdAt: new Date().toISOString() };$/", "language": "JavaScript", "kind": "property", "scope": "signup.users", "scopeKind": "class"}, {"_type": "tag", "name": "generateSalt", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function generateSalt(byteLength = 16) {$/", "language": "JavaScript", "kind": "function", "signature": "(byteLength = 16)"}, {"_type": "tag", "name": "getSession", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function getSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hashPassword", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export async function hashPassword(password, saltBase64) {$/", "language": "JavaScript", "kind": "function", "signature": "(password, saltBase64)"}, {"_type": "tag", "name": "isAuthenticated", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function isAuthenticated() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadUsers", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function loadUsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export async function login(email, password) {$/", "language": "JavaScript", "kind": "function", "signature": "(email, password)"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function logout() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "salt", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^  users[e] = { email: e, salt, hash, createdAt: new Date().toISOString() };$/", "language": "JavaScript", "kind": "field", "scope": "signup.users", "scopeKind": "class"}, {"_type": "tag", "name": "saveUsers", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function saveUsers(users) {$/", "language": "JavaScript", "kind": "function", "signature": "(users)"}, {"_type": "tag", "name": "setSession", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export function setSession(session) {$/", "language": "JavaScript", "kind": "function", "signature": "(session)"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^export async function signup(email, password) {$/", "language": "JavaScript", "kind": "function", "signature": "(email, password)"}, {"_type": "tag", "name": "users", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/authStorage.js", "pattern": "/^  users[e] = { email: e, salt, hash, createdAt: new Date().toISOString() };$/", "language": "JavaScript", "kind": "class", "scope": "signup", "scopeKind": "class"}], "hash": "1c6ce661a9bf543ce6eb2f0a81b7ad1e", "format-version": 4, "code-base-name": "frontend_web_app", "filename": "frontend_web_app/src/utils/authStorage.js", "fields": [{"name": "users[e] = { email: e, salt, hash, createdAt: new Date().toISOString() };", "scope": "signup.users", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"98": ""}]}