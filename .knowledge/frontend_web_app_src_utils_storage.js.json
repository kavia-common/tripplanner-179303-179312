{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for handling local storage operations, including versioned payload management, safe JSON parsing/serialization, and flag management. It defines schema versioning, key constants, and functions to load/save data with safety checks.", "external_files": [], "external_methods": ["window.localStorage.getItem", "window.localStorage.setItem"], "published": ["STORAGE_KEYS", "CURRENT_SCHEMA_VERSION", "safeParse", "safeStringify", "loadFromStorage", "saveToStorage", "makeVersionedPayload", "readVersionedPayload", "getFlag", "setFlag"], "classes": [], "methods": [{"name": "safeParse(json, fallback = null)", "description": "Safely parse JSON; return fallback if invalid.", "scope": "", "scopeKind": ""}, {"name": "safeStringify(value)", "description": "Safely stringify to JSON; falls back to empty object string if fails.", "scope": "", "scopeKind": ""}, {"name": "loadFromStorage(key)", "description": "Load a value from localStorage by key, returning null if not found or invalid.", "scope": "", "scopeKind": ""}, {"name": "saveToStorage(key, value)", "description": "Save a value to localStorage by key; no-op on errors.", "scope": "", "scopeKind": ""}, {"name": "makeVersionedPayload(data)", "description": "Wrap a payload with version metadata, including schema version and timestamp.", "scope": "", "scopeKind": ""}, {"name": "readVersionedPayload(payload)", "description": "Validate and read a versioned payload, checking version consistency.", "scope": "", "scopeKind": ""}, {"name": "getFlag(key)", "description": "Retrieve a boolean flag stored as '1' or '0'.", "scope": "", "scopeKind": ""}, {"name": "setFlag(key, value = true)", "description": "Set a boolean flag in localStorage as '1' or '0'.", "scope": "", "scopeKind": ""}], "calls": ["JSON.parse", "JSON.stringify", "window.localStorage.getItem", "window.localStorage.setItem"], "search-terms": ["storage utils", "localstorage versioning", "safe JSON operations", "local storage flags", "schema versioning"], "state": 2, "file_id": 21, "knowledge_revision": 66, "git_revision": "566150cb3cb0ccf8809240faa5595db84aaabea5", "revision_history": [{"47": ""}, {"66": "566150cb3cb0ccf8809240faa5595db84aaabea5"}], "ctags": [{"_type": "tag", "name": "CURRENT_SCHEMA_VERSION", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export const CURRENT_SCHEMA_VERSION = 1;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ONBOARDING_SEEN", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^  ONBOARDING_SEEN: 'wanderplan.onboarding.seen.v1',$/", "language": "JavaScript", "kind": "property", "scope": "STORAGE_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "SEEDED_SAMPLE", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^  SEEDED_SAMPLE: 'wanderplan.sample.seeded.v1',$/", "language": "JavaScript", "kind": "property", "scope": "STORAGE_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "STORAGE_KEYS", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export const STORAGE_KEYS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "TRIP_PLAN", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^  TRIP_PLAN: 'wanderplan.trip.v1',$/", "language": "JavaScript", "kind": "property", "scope": "STORAGE_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "getFlag", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function getFlag(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "loadFromStorage", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function loadFromStorage(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "makeVersionedPayload", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function makeVersionedPayload(data) {$/", "language": "JavaScript", "kind": "function", "signature": "(data)"}, {"_type": "tag", "name": "readVersionedPayload", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function readVersionedPayload(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "safeParse", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function safeParse(json, fallback = null) {$/", "language": "JavaScript", "kind": "function", "signature": "(json, fallback = null)"}, {"_type": "tag", "name": "safeStringify", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function safeStringify(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "saveToStorage", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function saveToStorage(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}, {"_type": "tag", "name": "setFlag", "path": "/home/kavia/workspace/code-generation/tripplanner-179303-179312/frontend_web_app/src/utils/storage.js", "pattern": "/^export function setFlag(key, value = true) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value = true)"}], "hash": "4afbae35504733bfba58b57ad5415d7f", "format-version": 4, "code-base-name": "frontend_web_app", "filename": "frontend_web_app/src/utils/storage.js", "fields": [{"name": "ONBOARDING_SEEN: 'wanderplan.onboarding.seen.v1',", "scope": "STORAGE_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "SEEDED_SAMPLE: 'wanderplan.sample.seeded.v1',", "scope": "STORAGE_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "TRIP_PLAN: 'wanderplan.trip.v1',", "scope": "STORAGE_KEYS", "scopeKind": "class", "description": "unavailable"}]}